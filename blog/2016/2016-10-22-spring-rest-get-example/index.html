<p>Merhabalar.</p>

<p>Java EE ailesi içerisinde web servis için oluşturulmuş olan bir JAX-RS specti bulunmakta. Buna karşın Java EE spectler’inin yanında
çokça tercih edilen Spring Framework de kendi Restful kütüphanesine sahip. Ben de bu ve gelecek birkaç yazıda Spring Rest ile örnekler
yapmaya çalışacağım.</p>

<p>Bu yazıda Spring Restful Web Service ilr bir GET örneği yapacağız.</p>

<p>Başlayalım..</p>

<p>Hepsinden önce şunu söylemeliyim ki örneğimiz bir Spring Boot Application olacak. Bunun sebebi çok daha kolaylaştırılmış ve konfigürasyon
karmaşalarından kurtulmuş bir uygulama yazma isteğimdir.</p>

<p>Projemizin bir maven projesi olacak ve şimdi pom.xml dosyamızı inceleyelim:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">"http://maven.apache.org/POM/4.0.0"</span> <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>com.ilkaygunel<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>SpringRestTutorial<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>

	<span class="nt">&lt;parent&gt;</span>
		<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;version&gt;</span>1.4.1.RELEASE<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;/parent&gt;</span>

	<span class="nt">&lt;dependencies&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
	<span class="nt">&lt;/dependencies&gt;</span>

	<span class="nt">&lt;properties&gt;</span>
		<span class="nt">&lt;java.version&gt;</span>1.8<span class="nt">&lt;/java.version&gt;</span>
	<span class="nt">&lt;/properties&gt;</span>


	<span class="nt">&lt;build&gt;</span>
		<span class="nt">&lt;plugins&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
		<span class="nt">&lt;/plugins&gt;</span>
	<span class="nt">&lt;/build&gt;</span>

	<span class="nt">&lt;repositories&gt;</span>
		<span class="nt">&lt;repository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-releases<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/libs-release<span class="nt">&lt;/url&gt;</span>
		<span class="nt">&lt;/repository&gt;</span>
	<span class="nt">&lt;/repositories&gt;</span>
	<span class="nt">&lt;pluginRepositories&gt;</span>
		<span class="nt">&lt;pluginRepository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-releases<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/libs-release<span class="nt">&lt;/url&gt;</span>
		<span class="nt">&lt;/pluginRepository&gt;</span>
	<span class="nt">&lt;/pluginRepositories&gt;</span>
<span class="nt">&lt;/project&gt;</span>
</code></pre>
</div>

<p>Bizim yapacağımız örnek için sadece bir bağımlılığa ihtiyacımız var, o da <strong><em>spring-boot-starter-web</em></strong> kütüphanesi. Ayrıca projeyi
Maven üzerinden koşturmak için de <strong><em>spring-boot-maven-plugin</em></strong> eklentisini projemize ekliyoruz. pom.xml dosyamız oldukça basit.</p>

<p>Şimdi Java sınıflarımızı inceleyelim.</p>

<p><strong>Address.java</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">pojo</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
	
	<span class="kd">public</span> <span class="n">Address</span><span class="o">(){</span>
		
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="n">Address</span><span class="o">(</span><span class="n">String</span> <span class="n">neighborhood</span><span class="o">,</span><span class="n">String</span> <span class="n">borough</span><span class="o">,</span><span class="n">String</span> <span class="n">city</span><span class="o">,</span><span class="n">String</span> <span class="n">country</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">borough</span> <span class="o">=</span> <span class="n">borough</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">country</span> <span class="o">=</span> <span class="n">country</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">String</span> <span class="n">neighborhood</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">borough</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">city</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">country</span><span class="o">;</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getNeighborhood</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">neighborhood</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setNeighborhood</span><span class="o">(</span><span class="n">String</span> <span class="n">neighborhood</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getBorough</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">borough</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setBorough</span><span class="o">(</span><span class="n">String</span> <span class="n">borough</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">borough</span> <span class="o">=</span> <span class="n">borough</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getCity</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">city</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setCity</span><span class="o">(</span><span class="n">String</span> <span class="n">city</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getCountry</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">country</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setCountry</span><span class="o">(</span><span class="n">String</span> <span class="n">country</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">country</span> <span class="o">=</span> <span class="n">country</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p>Address ismindeki pojo sınıfımız adres bilgisine ait birtakım özellikleri tutacak değişkenleri ve onların get-set metotlarını bünyesinde
barındırıyor.</p>

<p><strong>Person.java</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">pojo</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Person</span> <span class="o">{</span>
	
	<span class="kd">public</span> <span class="n">Person</span><span class="o">(){</span>
		
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="n">Person</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">,</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span><span class="n">String</span> <span class="n">surname</span><span class="o">,</span><span class="n">Address</span> <span class="n">address</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">surname</span> <span class="o">=</span> <span class="n">surname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span><span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">String</span> <span class="n">id</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">surname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">Address</span> <span class="n">address</span><span class="o">;</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getId</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setId</span><span class="o">(</span><span class="n">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="n">getSurname</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">surname</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setSurname</span><span class="o">(</span><span class="n">String</span> <span class="n">surname</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">surname</span> <span class="o">=</span> <span class="n">surname</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">Address</span> <span class="n">getAddress</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="n">setAddress</span><span class="o">(</span><span class="n">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span>
</code></pre>
</div>

<p>Web servis üzerinde kullanacağımız ana sınıf olan Person sınıfı ise kişiye ait isim, soyisim ve adres bilgilerini barındırıyor. Burada
adres bilgisini başka bir sınıf türünden sağladığına dikkat edelim. Az sonra web servisden çıktı alırken buraya tekrar değineceğim. Onun
dışında bu sınıfımız da klasik bir POJO sınıfı gibi oldukça baist.</p>

<p><strong>GetExampleController</strong></p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">getExample</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">pojo.Address</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">pojo.Person</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GetExampleController</span> <span class="o">{</span>

	<span class="nd">@RequestMapping</span><span class="o">(</span><span class="s">"/getExample"</span><span class="o">)</span>
	<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">getExample</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">"personId"</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">"0"</span><span class="o">)</span> <span class="n">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">personList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
		<span class="n">Person</span> <span class="n">person1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"1"</span><span class="o">,</span> <span class="s">"ilkay"</span><span class="o">,</span> <span class="s">"günel"</span><span class="o">,</span>
				<span class="k">new</span> <span class="n">Address</span><span class="o">(</span><span class="s">"Cennet Mah."</span><span class="o">,</span> <span class="s">"K.Çekmece"</span><span class="o">,</span> <span class="s">"İstanbul"</span><span class="o">,</span> <span class="s">"TÜRKİYE"</span><span class="o">));</span>
		<span class="n">personList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">person1</span><span class="o">);</span>

		<span class="n">Person</span> <span class="n">person2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"2"</span><span class="o">,</span> <span class="s">"alican"</span><span class="o">,</span> <span class="s">"akkuş"</span><span class="o">,</span>
				<span class="k">new</span> <span class="n">Address</span><span class="o">(</span><span class="s">"Cennet Mah."</span><span class="o">,</span> <span class="s">"K.Çekmece"</span><span class="o">,</span> <span class="s">"İstanbul"</span><span class="o">,</span> <span class="s">"TÜRKİYE"</span><span class="o">));</span>
		<span class="n">personList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">person2</span><span class="o">);</span>

		<span class="n">Person</span> <span class="n">person3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">"3"</span><span class="o">,</span> <span class="s">"mustafa"</span><span class="o">,</span> <span class="s">"demir"</span><span class="o">,</span>
				<span class="k">new</span> <span class="n">Address</span><span class="o">(</span><span class="s">"Cennet Mah."</span><span class="o">,</span> <span class="s">"K.Çekmece"</span><span class="o">,</span> <span class="s">"İstanbul"</span><span class="o">,</span> <span class="s">"TÜRKİYE"</span><span class="o">));</span>
		<span class="n">personList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">person3</span><span class="o">);</span>

		<span class="k">if</span> <span class="o">(</span><span class="n">id</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">"0"</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">personList</span><span class="o">;</span>
		<span class="o">}</span>
		<span class="k">else</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">personList</span><span class="o">.</span><span class="na">subList</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">id</span><span class="o">)-</span><span class="mi">1</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">id</span><span class="o">));</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>GetExampleController sınıfımız web servis üretecek olan sınıfımızdır.</p>

<ul>
  <li>Öncelikle web servis üretecek sınıfımızı <strong><em>@RestController</em></strong> notasyonu ile işaretliyoruz.</li>
  <li>Sınıfımızın içerisinde hangi metodun hangi URL’den gelen isteği karşılayacağını ise @RequestMapping notasyonu ile belirliyoruz.
Bizim örneğimizde getExample URL’ine gelen istek getExample metoduna yönlendirilecek.</li>
  <li>getExample metodu döndüreceği sonucu belirleyecek bir parametre alacak şekilde yazıldı. @RequestParam notasyonu ile belirtilen
bu parametre’nin adı <strong><em>value</em></strong> özelliği ile belirleniyor. Eğer kullanıcı herhangi bir parametre göndermezse varsayılan olarak 
bu değer <strong><em>defaultValue</em></strong> özelliğine atanmış olan 0 olacak.</li>
  <li>Kodumuz içerisinde ise eğer kullanıcı parametre göndermemiş ise bütün liste döndürülüyor. Eğer 1,2,3 sayılarından biri paremetre
olarak gelirse listenin o gözündeki değer List interface’indeki sublist metodu ile alınıp döndürülüyor.</li>
</ul>

<p><strong>application.properties</strong></p>

<p>Bu dosyanın olması projenin çalışması açısından elzem değil. Sadece bu dosya olmadığında Spring Boot projeyi localhost:8080 adresine
deploy edecek. Eğer adres çubuğunda proje adı gözüksün ve bu adrese deploy edilsin derseniz bu dosyayı eklemelisiniz.</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="n">server</span><span class="o">.</span><span class="na">contextPath</span><span class="o">=/</span><span class="n">SpringRestTutorial</span>
<span class="n">server</span><span class="o">.</span><span class="na">port</span><span class="o">=</span><span class="mi">8080</span>
</code></pre>
</div>

<p><strong>Projenin Çalıştırılması</strong></p>

<p>Ben bu projeyi Eclipse IDE’de yazıyorum ancak şimdi yapacağım yöntem NetBeans IDE’de gerçekleştirebilir.</p>

<p>Şimdi projeye sağ tıklayıp Rus As kısmından <strong><em>Maven Build</em></strong>‘i seçelim ve şu komutu girelim. Akabinde Run butonuna tıklayalım.</p>

<p><a href="/images/springRest/get1.png">
<img src="/images/springRest/get1.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Spring Boot içerisindeki Tomcat’e uygulamamız deploy edilecek. Şimdi adres çubuğundan http://localhost:8080/SpringRestTutorial/getExample
adresine gidelim.</p>

<p>Ve karşımızda web servisimizin çıktısı. Listedeki tüm elemanları barındıran JSON çıktımız tarayıcımızda görülüyor.</p>

<p><a href="/images/springRest/get2.png">
<img src="/images/springRest/get2.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Şimdi de http://localhost:8080/SpringRestTutorial/getExample?personId=2 adresine gidelim. Id bilgisi 2 olan kullanıcı bize 
döndürülüyor.</p>

<p><a href="/images/springRest/get3.png">
<img src="/images/springRest/get3.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Bu örneğin bir de XML formatında çıktı veren şeklini yapmak istedim ancak birkaç saatlik uğraşım neticesinde XML çıktısının sorunlarını
aşamadım ve örneği yapamadım. Eğer ilerde yapabilirsem de yazıyı güncelleyeceğim.</p>

<p>Görüşene kadar sağlıcakla kalın.</p>

<p style="text-align: center">Selam ve Sevgilerimle</p>
