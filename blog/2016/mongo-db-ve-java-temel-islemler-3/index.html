<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm</title>
    <meta name="description" content="Merhabalar. Önceki yazıda MongoDB veritabanımızdan kayıt çekme işlemlerininbir kısmını görmüştük. Bu yazı ile de kayıt çekme işlemlerini tamamlayacağız.">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-3/">
    <link rel="alternate" type="application/rss+xml" title="İlkay Günel - Blog" href="http://ilkaygunel.com/feed.xml" />
      <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm - İlkay Günel - Blog</title>
<meta property="og:title" content="Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm" />
<meta name="description" content="Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm" />
<meta property="og:description" content="Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm" />
<link rel="canonical" href="http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-3/" />
<meta property="og:url" content="http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-3/" />
<meta property="og:site_name" content="İlkay Günel - Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-09-04T19:38:20+03:00" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm",
    "datePublished": "2016-09-04T19:38:20+03:00",
    "description": "Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm",
    "url": "http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-3/"
  }
</script>
<!-- End Jekyll SEO tag -->
  </head>

  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76541903-2', 'auto');
  ga('send', 'pageview');
</script>

    <main>
      <header class="site-header">
  <div class="container">
    <h1><a href="/">Ana Sayfa</a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/cv.pdf" title="Bana Ait CV">Bana Ait CV</a></li>
        
          <li><a href="/blog/2016/git-nedir" title="Git Nedir? Nasıl Kullanılır?">Git Nedir? Nasıl Kullanılır?</a></li>
        
          <li><a href="/blog/2016/jsf-tutorials-list" title="JSF">JSF</a></li>
        
          <li><a href="/blog/2016/spring-tutorials" title="Spring 4">Spring 4</a></li>
        
          <li><a href="/blog/2016/eclipselink" title="Eclipselink">Eclipselink</a></li>
        
          <li><a href="/blog/2016/resteasy/" title="Resteasy">Resteasy</a></li>
        
          <li><a href="/blog/2016/mongodb/" title="MongoDB&Java">MongoDB&Java</a></li>
        
          <li><a href="/blog/2016/test" title="Test">Test</a></li>
        
          <li><a href="/blog/2016/useful-libraries-for-java" title="Java İçin Faydalı Kütüphaneler">Java İçin Faydalı Kütüphaneler</a></li>
        
          <li><a href="/about" title="Hakkımda">Hakkımda</a></li>
        
          <li><a href="/blog/2016/eclipse-notes" title="Eclipse">Eclipse</a></li>
        
          <li><a href="/blog/2016/formula1/" title="Formula 1">Formula 1</a></li>
        
          <li><a href="/blog/2016/kitaplar" title="Kitaplar">Kitaplar</a></li>
        
          <li><a href="/blog" title="Blog">Blog</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Mongo DB Ve Java Temel İşlemler 3 - Kayıt Çekme - İkinci Bölüm</h1>
      <p class="post-meta">Sep 4, 2016</p>
    </header>

    <div class="post-content">
      <p>Merhabalar. <a href="http://ilkgunel.github.io/mongoDbAndJava/mongo-db-ve-java-temel-islemler-2/">Önceki</a> yazıda MongoDB veritabanımızdan kayıt çekme işlemlerinin
bir kısmını görmüştük. Bu yazı ile de kayıt çekme işlemlerini tamamlayacağız.</p>

<p>Java kodumuza geçmeden önce yine MongoDB’deki kayıtlardan herhangi birisine göz atalım:</p>

<p><code class="highlighter-rouge">json
{
    "_id": "57c19b523e9b4210f7353280",
    "address": {
      "street": "2 Avenue",
      "zipcode": "10078",
      "building": "1480",
      "coord": [
        -73.9557413,
        40.7720266
      ]
    },
    "borough": "Manhattan",
    "cuisine": "Russian",
    "grades": [
      {
        "date": "27-08-2016",
        "grade": "A",
        "score": 12
      },
      {
        "date": "27-08-2016",
        "grade": "B",
        "score": 13
      }
    ],
    "name": "Vella",
    "restaurant_id": "41704620"
  }
</code></p>

<p>MongoDB’den kayıt çekme işlemleri sırasında büyüktür&amp;küçüktür işlemleri de uygulanabilir. Yani belli bir değerin üstündekileri ya da altındakileri getir diyebiliriz. Örneğin yukarıdaki kaydı baz alarak
score alanı değerinin 13’den büyük olan kayıtlarının getirilmesini istiyoruz. Bunun için kullanacağımız kodumuz şu şekilde olur:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>import static com.mongodb.client.model.Filters.gt;
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(gt("grades.score", 13));
          
iterable.forEach(new Block&lt;Document&gt;(){
    @Override
    public void apply(final Document document){
        System.out.println(document);
    }
});
</code></pre>
</div>

<p>Kodu çalıştırdığımızda karşımıza gelen çıktı da şöyle,</p>

<p><a href="/images/mongoSelect4.png">
<img src="/images/mongoSelect4.png" style="width: 958px; height= 400px;" /></a></p>

<p>Tabii burada şu sorulabilir. Bu greades altında iki kayıt tutuluyor, örneğin 13-14 şeklinde olsa idi ne olacaktı? O zaman 13-14 score’una sahip kayıt da getirilecekti çünkü bize 13’den 
büyük score alanına sahip tüm kayıtlar getiriliyor. grades altındakilern sadece birinin istenenden büyük olması yeterli.</p>

<p>Yukarıdaki kod şu şekilde de kullanılabilirdi:</p>

<p><code class="highlighter-rouge">java
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(new Document("grades.score", new Document("$gt", 13)));
</code></p>

<p>Eğer belirli bir değerden küçük değerleri getir demek istiyorsak da <strong><em>lt</em></strong>‘yi kullanabiliriz. Şu kod parçası da iki score alanından birisi 15’den küçük değer içeren tüm
kayıtları getirecektir.</p>

<p><code class="highlighter-rouge">java
import static com.mongodb.client.model.Filters.lt;
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(lt("grades.score", 15));
</code></p>

<p>Yine aynı şekilde bu kod da yukarıdaki gibi new Document parametre verilerek kullanılabilir:</p>

<p><code class="highlighter-rouge">java
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(new Document("grades.score", new Document("$lt", 15)));
</code></p>

<p>Ekran çıktımız da şöyle olur, 15’den küçük score alanı olan tüm kayıtlar getirilir:</p>

<p><a href="/images/mongoSelect5.png">
<img src="/images/mongoSelect5.png" style="width: 958px; height= 400px;" /></a></p>

<p>SQL ile klasik veri tabanı işlemeri yaparken kullanılan AND,OR işlemleri MongoDB’nin Java kütüphanesinde de mevcut. Şimdi örneğin cuisine alanı Turkish olan ve score alanı 11 olan kayıtları
getir diyelim. Kodumuz şu şekilde olur:</p>

<p><code class="highlighter-rouge">java
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(and(eq("grades.score", 11),eq("cuisine", "Turkish")));
</code></p>

<p>Resimde de gördüğümüz gibi cuisine alanı Turkish olan ve 11 score’una sahip kaydı bize getirdi.</p>

<p><a href="/images/mongoSelect6.png">
<img src="/images/mongoSelect6.png" style="width: 958px; height= 400px;" /></a></p>

<p>Aynı kod şu şekilde de yazılabilirdi, bu durumda önceki örneklere benzer şekilde döküman parametresi yolluyoruz fakat AND işleminin gerçekleşmesi için
şartlarımızı <strong><em>append</em></strong>‘liyoruz:</p>

<p><code class="highlighter-rouge">java
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(and(new Document("cuisine", "Turkish").append("grades.score", 11));
</code></p>

<p>OR operatörünü kullanmak istediğimizde ise döküman parametresi yollayacaksan durum yukarıdakinden farklı oluyor. OR işleminin yapılacağını bildirmek için parametre olarak verilen
dökümanda <strong><em>$or</em></strong> olması gerekiyor. Örnek kodumuz şöyle olur:</p>

<p><code class="highlighter-rouge">java
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(new Document("$or", asList(new Document("cuisine", "Turkish"),
                                                                                         new Document("grades.score", 14))));
</code></p>

<p>Parametre olarak geçirdiğimiz dökümanda birinci parametre yani key parametresi OR işleminin yapılacağını bildiren <strong><em>$or</em></strong> oluyor, ikinci parametre
hangi şartlarda veri beklediğimizi bildiriyor. Biz cuisine key’ine karşılık Turkish değeri olan veya score alanı 14 olan kayıtları getir diyoruz.</p>

<p><a href="/images/mongoSelect7.png">
<img src="/images/mongoSelect7.png" style="width: 958px; height= 400px;" /></a></p>

<p>Yukarıdaki kod şu şekilde de kullanılabilirdi:</p>

<p><code class="highlighter-rouge">java
import static com.mongodb.client.model.Filters.or;
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find(or(eq("cuisine", "Turkish"), eq("grades.score", 14)));
</code></p>

<p>Bazı durumlarda veritabanından aldığımız kayıtlarımızı artan ya da azalan sırada elde etmek isteriz. Bunun için de MongoDB Java kütüphanesinin içinde <strong><em>sort()</em></strong> metodu
yer alıyor. sort metoduna az önceki gibi bir döküman parametre geçireceğiz ve dökümanın key alanı hangi alana göre sıralama yapmak istediğimiz, value alanı ise
artan mı yoksa azalan sırada mı listelemek istediğimizi belirtecek. Örnek kodumuz şöyle :</p>

<p><code class="highlighter-rouge">java
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find().sort(new Document("address.zipcode", -1));
</code></p>

<p>Kodumuz içinde sort metoduna verdiğimiz döküman parametresinin key alanı hangi alana göre sıralama yapılıp kayıtlar getirilsin demek içindir. Value alanı ise
artan mı azalan sırada mı listeleme yapmayı belirtmek içindir. Eğer <strong>1</strong> gönderirseniz bu artan sırada demektir, <strong>-1</strong> gönderirseniz azalan sırada demektir.
Kodu çalıştırınca zipcode alanına göre şöyle bir azalan sırada çıktı elde ediyoruz:</p>

<p><a href="/images/mongoSelect8.png">
<img src="/images/mongoSelect8.png" style="width: 958px; height= 400px;" /></a></p>

<p>Yukarıdaki kod şu şekilde de yazılabilirdi,Sorts sınıfı altındaki ascending-descending metotlarını kullanabiliriz. Örneğin azalan sırada listeleme için
descending metodunu kullanıyoruz:</p>

<p><code class="highlighter-rouge">java
import static com.mongodb.client.model.Sorts.descending;
FindIterable&lt;Document&gt; iterable = database.getCollection("Records").find().sort(descending("address.zipcode"));
</code></p>

<p>Biz yukarıdaki örneklerde tek bir key’e göre sıralama yapılmasını istedik. Eğer birden fazla key işin içine girecekse kodumuz şöyle olmalıdır:</p>

<p><code class="highlighter-rouge">java
FindIterable&lt;Document&gt; iterable = database.getCollection("collectionName").find().sort(new Document("selectKey1", 1 or -1).append("selectKey2", 1 or -1));
//Ya da şu şekilde de olabilir
FindIterable&lt;Document&gt; iterable = database.getCollection("collectionName").find().sort(ascending or descending("selectKey1", "selectKeyTwo"));
</code></p>

<p>Bu yazıda da bu kadar arkadaşlar. MongoDB’den kayıt çekme işlemlerini tamamladık. Gelecek yazıda kayıt güncelleme işlemlerine değineceğiz.
Görüşene kadar sağlıcakla kalın.</p>

<p style="text-align: center">Selam ve Sevgilerimle</p>


    </div>

    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
<script>

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//ilkaygunel-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                                    
  </div>
</aside>

  </div>

</article>

      </div>

      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="http://github.com/ilkgunel" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="http://twitter.com/ilkgunel" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="https://www.facebook.com/ilkay.gunel" target="_blank"><i class="icon icon-facebook"></i></a></li>
  <li><a href="http://linkedin.com/in/ilkaygunel" target="_blank"><i class="icon icon-linkedin"></i></a></li>
  <li><a href="https://www.instagram.com/first.month/" target="_blank"><img src="/images/instagram.png" style="width: 24px;height: 24px;"></img></a></li>
</ul>
    <p class="txt-medium-gray">
      <small>&copy;2017 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <a href="http://github.com/ilkgune/ilkgunel.github.io" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#337ab7; color:#fff; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
      <script>
      $(document).ready(function() {
        $('.sliding-panel-button,.sliding-panel-fade-screen,.sliding-panel-close').on('click touchstart',function (e) {
          $('.sliding-panel-content,.sliding-panel-fade-screen').toggleClass('is-visible');
          e.preventDefault();
        });
      });
      </script>
    </main>
  </body>
</html>
