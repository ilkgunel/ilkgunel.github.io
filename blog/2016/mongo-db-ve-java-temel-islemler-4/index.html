<!DOCTYPE html>
<html>
    <head>
  <script type="text/javascript">
        function setVoice() {
            var vid = document.getElementById("voice");
            if(vid!=null){
            	vid.volume = 0.2;
            }
        }
        window.onload = setVoice;
        </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
		google_ad_client: "ca-pub-0980023289791742",
		enable_page_level_ads: true
	  });
	</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme</title>
    <meta name="description" content="Önceki 3 yazımızda MongoDB veritabanımıza Java ile nasıl kayıt girileceği ve kayıt çekileceği işlemlerini öğrenmiştik. Bu yazıda da mevcut verininnasıl günce...">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-4/">
    <link rel="alternate" type="application/rss+xml" title="İlkay Günel - Blog" href="http://ilkaygunel.com/feed.xml" />
      <!-- Begin Jekyll SEO tag v2.3.0 -->
<title>Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme | İlkay Günel - Blog</title>
<meta property="og:title" content="Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme" />
<meta name="author" content="İlkay Günel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme" />
<meta property="og:description" content="Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme" />
<link rel="canonical" href="http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-4/" />
<meta property="og:url" content="http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-4/" />
<meta property="og:site_name" content="İlkay Günel - Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-09-05T19:38:20+03:00" />
<script type="application/ld+json">
{"name":null,"description":"Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme","author":{"@type":"Person","name":"İlkay Günel"},"@type":"BlogPosting","url":"http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-4/","publisher":null,"image":null,"headline":"Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme","dateModified":"2016-09-05T19:38:20+03:00","datePublished":"2016-09-05T19:38:20+03:00","sameAs":null,"mainEntityOfPage":{"@type":"WebPage","@id":"http://ilkaygunel.com/blog/2016/mongo-db-ve-java-temel-islemler-4/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76541903-2', 'auto');
  ga('send', 'pageview');
</script>

    <main>
      <header class="site-header">
  <div class="container">
    <h1><a href="/">Ana Sayfa</a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/ilkay-gunel-cv.pdf" title="Bana Ait CV">Bana Ait CV</a></li>
        
          <li><a href="/blog/2016/git-nedir" title="Git Nedir? Nasıl Kullanılır?">Git Nedir? Nasıl Kullanılır?</a></li>
        
          <li><a href="/blog/2017/angular-2-tutorials" title="Angular 2">Angular 2</a></li>
        
          <li><a href="/blog/2016/maven-tutorials" title="Maven">Maven</a></li>
        
          <li><a href="/blog/2016/jsf-tutorials-list" title="JSF">JSF</a></li>
        
          <li><a href="/blog/2016/spring-tutorials" title="Spring 4">Spring 4</a></li>
        
          <li><a href="/blog/2016/eclipselink" title="Eclipselink">Eclipselink</a></li>
        
          <li><a href="/blog/2016/resteasy/" title="Resteasy">Resteasy</a></li>
        
          <li><a href="/blog/2016/mongodb/" title="MongoDB&Java">MongoDB&Java</a></li>
        
          <li><a href="/blog/2016/test" title="Test">Test</a></li>
        
          <li><a href="/blog/2016/useful-libraries-for-java" title="Java İçin Faydalı Kütüphaneler">Java İçin Faydalı Kütüphaneler</a></li>
        
          <li><a href="/about" title="Hakkımda">Hakkımda</a></li>
        
          <li><a href="/blog/2016/eclipse-notes" title="Eclipse">Eclipse</a></li>
        
          <li><a href="/blog/2016/formula1/" title="Formula 1">Formula 1</a></li>
        
          <li><a href="/blog/2016/kitaplar" title="Kitaplar">Kitaplar</a></li>
        
          <li><a href="/blog" title="Blog">Blog</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
        <li><a href="https://1000kitap.com/ilkaygunel">1000Kitap</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Mongo DB Ve Java Temel İşlemler 4 - Kayıt Güncelleme</h1>
      <p class="post-meta">Sep 5, 2016</p>
    </header>

    <div class="post-content">
      <p>Önceki 3 yazımızda MongoDB veritabanımıza Java ile nasıl kayıt girileceği ve kayıt çekileceği işlemlerini öğrenmiştik. Bu yazıda da mevcut verinin
nasıl güncellenebileceğine değineceğiz.</p>

<p>Üzerinde update işlemi uygulayacağımız örnek Bson’larımızdan birisi şu arkadaşlar:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
    "_id": "57c19b523e9b4210f7353280",
    "address": {
      "street": "2 Avenue",
      "zipcode": "10078",
      "building": "1480",
      "coord": [
        -73.9557413,
        40.7720266
      ]
    },
    "borough": "Manhattan",
    "cuisine": "Russian",
    "grades": [
      {
        "date": "27-08-2016",
        "grade": "A",
        "score": 16
      },
      {
        "date": "27-08-2016",
        "grade": "B",
        "score": 17
      }
    ],
    "name": "Vella",
    "restaurant_id": "41704620"
  }
</code></pre></div></div>

<p>Biz şimdi update kodumuzda <strong><em>borough</em></strong> alanını St.Petersburg olarak güncelleyeceğiz. Güncelleme kodumuz şöyle:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="n">io</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">ilkgunel</span><span class="p">.</span><span class="n">mongodb</span><span class="p">;</span>

<span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">mongodb</span><span class="p">.</span><span class="n">MongoClient</span><span class="p">;</span>
<span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">mongodb</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">MongoDatabase</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">bson</span><span class="p">.</span><span class="n">Document</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">MongoDBUpdateRecords</span> <span class="p">{</span>
    <span class="k">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="k">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">){</span>
        <span class="n">MongoClient</span> <span class="n">mongoClient</span><span class="p">=</span><span class="n">null</span><span class="p">;</span>
        <span class="n">try</span> <span class="p">{</span>
            <span class="n">mongoClient</span> <span class="p">=</span> <span class="n">new</span> <span class="n">MongoClient</span><span class="p">(</span><span class="s2">"localhost"</span><span class="p">,</span> <span class="m">27017</span><span class="p">);</span>
            <span class="n">MongoDatabase</span> <span class="n">database</span> <span class="p">=</span> <span class="n">mongoClient</span><span class="p">.</span><span class="n">getDatabase</span><span class="p">(</span><span class="s2">"MongoDB"</span><span class="p">);</span>
            
            <span class="n">database</span><span class="p">.</span><span class="n">getCollection</span><span class="p">(</span><span class="s2">"Records"</span><span class="p">).</span><span class="n">updateOne</span><span class="p">(</span><span class="n">new</span> <span class="n">Document</span><span class="p">(</span><span class="s2">"cuisine"</span><span class="p">,</span><span class="s2">"Russian"</span><span class="p">),</span> 
                    <span class="n">new</span> <span class="n">Document</span><span class="p">(</span><span class="s2">"$set"</span><span class="p">,</span><span class="n">new</span> <span class="n">Document</span><span class="p">(</span><span class="s2">"borough"</span><span class="p">,</span><span class="s2">"St.Petersburg"</span><span class="p">)));</span>
        
        <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"An Error Occured! Error is:"</span><span class="p">+</span><span class="n">e</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">finally</span><span class="p">{</span>
            <span class="n">mongoClient</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
        <span class="p">}</span>
        
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Kod içerisinde database.getCollection(“Records”) diyerek Records collection’ını elde ediyoruz ve updateOne metodu ile bir kaydı güncelleyeceğimizi söylüyoruz.
updateOne metoduna iki parametre veriyoruz. Birinci parametre bizim şartımızı bildiriyor. Bir döküman parametresi geçirerek cuisine alanı Russian olan kayıt üzerinde güncelleme yapılacak diyoruz.
Burda trick bir nokta var. Birden fazla cuisine alanı Russian olan kayıt varsa ilk karşılaşılan kayıt üzerinde güncelleme yapılır, diğer kağıtlara dokunulmaz.
updateOne matoduna verdiğimiz ikinci parametre yine bir döküman. Bu dökümanda key alanına <strong><em>$set</em></strong> operatörü ataması yapıyoruz. Bu operatör
SQL’deki Update komutundaki Set gibi çalışarak value alanındaki döküman ile güncelleme yapıyor. updateOne metoduna verdiğimiz ikinci parametrenin value alanı da
yine bir döküman ve bu dökümanda da key alanına güncellenecek alanı, value alanına güncellenecek değeri veriyoruz.</p>

<p>İşlemin neticesinde MongoClient üzerinden baktığımızda güncellemenin başarılı olduğunu görüyoruz.</p>

<p><a href="/images/mongoUpdate1.png">
<img src="/images/mongoUpdate1.png" style="width: 958px; height= 400px;" /></a></p>

<p>Yukarıdaki güncelleme işlemi kaydın doğrudan bir alanına yönelikti. Biz bir de bir alanın altındaki alanı güncelleyebiliriz. Örneğin yukarıdaki BSON üzerinde address alanı altındaki building
alanını güncelleyelim ve bunun için şu kodu kullanalım. Bu arada MongoDB’nin dökümantasyonunda bu alanlara yani bir alanın içine açılmış alt alanların barındığı kısıma <strong><em>Embedded Document</em></strong> deniyor.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	database.getCollection("Records").updateOne(new Document("cuisine", "Russian"), 
	new Document("$set", new Document("address.building", "1481")));
</code></pre></div></div>

<p>Kodda az önce yaptığımızdan bir fark yok. Sadece daha önce de gördüğümüz gibi iç içe alanlar için “.” operaötürnü kullanarak ulaşıyoruz. Kodu çalıştırıp MongoClient’a baktığımızda kaydın ilgili alanının başarılı bir şekilde güncellendiğini görebiliyoruz.</p>

<p><a href="/images/mongoUpdate2.png">
<img src="/images/mongoUpdate2.png" style="width: 958px; height= 400px;" /></a></p>

<p>Bu kısıma kadar tek kayıt güncellemeye yarayan updateOne metodunu gördük. Birden fazla kayıt güncellemek istediğimizde ise updateMany metodunu kullanmamız gerekiyor. Üzerinde update işlemi gerçekleştireceğimiz iki BSON’a şöyle bakalım:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"_id": "57c19b523e9b4210f7353281",
"address": {
  "street": "2 Avenue",
  "zipcode": "10079",
  "building": "1480",
  "coord": [
    -73.9557413,
    40.7720266
  ]
},
"borough": "Manhattan",
"cuisine": "Italian",
"grades": [
  {
    "date": "27-08-2016",
    "grade": "A",
    "score": 18
  },
  {
    "date": "27-08-2016",
    "grade": "B",
    "score": 19
  }
],
"name": "Vella",
"restaurant_id": "41704620"
}
  
{
"_id": "57c19b523e9b4210f735327e",
"address": {
  "street": "2 Avenue",
  "zipcode": "10076",
  "building": "1480",
  "coord": [
    -73.9557413,
    40.7720266
  ]
},
"borough": "Manhattan",
"cuisine": "Italian",
"grades": [
  {
    "date": "27-08-2016",
    "grade": "A",
    "score": 12
  },
  {
    "date": "27-08-2016",
    "grade": "B",
    "score": 13
  }
],
"name": "Vella",
"restaurant_id": "41704620"
}
</code></pre></div></div>

<p>Az önce de söylediğim gibi updateOne metodu kendisine verilen şarta göre ilk bulduğu kayıt üzerinde update yapar. Yukarıdaki kayıtların cuisine alanları aynı değerleri taşıyorlar.
  Bu şartı updateMany metoduna verdiğimiz zaman aynı şartı taşıyan tüm kayıtlara update uygulanacak. Örnek kodumuz şöyle:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	database.getCollection("Records").updateMany(new Document("cuisine", "Italian"), 
	new Document("$set", new Document("borough", "Sicily")));
</code></pre></div></div>

<p>Kodumuz cuisine alanı Italian olan tüm kayıtları bulacak ve akabinde borough alanlarını Sicily olarak güncelleyecek.</p>

<p>Kodu çalıştırdığımızda ilgili kayıtlar başarı ile güncelleniyor.</p>

<p><a href="/images/mongoUpdate3.png">
<img src="/images/mongoUpdate3.png" style="width: 958px; height= 400px;" /></a></p>

<p>Bunların yanında bir de döküman değiştirme metodu kütüphane içerisinde yer alıyor. <strong><em>replaceOne</em></strong> adındaki metot ile mevcut kaydın tek seferde yeni bir kayıt ile değiştirilmesini sağlayabiliriz.
Şimdi şu kayıt üzerinde replaceOne metodunu uygulayalım. Burada ayırt edici alan olarak yine cuisine alanını kullanabiliriz.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
"id": "57c1991a3e9b4210c9d291c9",
"address": {
  "street": "2 Avenue",
  "zipcode": "10075",
  "building": "1480",
  "coord": [
    -73.9557413,
    40.7720266
  ]
},
"borough": "Manhattan",
"cuisine": "Turkish",
"grades": [
  {
    "date": "27-08-2016",
    "grade": "A",
    "score": 10
  },
  {
    "date": "27-08-2016",
    "grade": "B",
    "score": 11
  }
],
"name": "Vella",
"restaurant_id": "41704620"
}
</code></pre></div></div>

<p>Şimdi bu kayıt üzerinde replaceOne metodunu kullanarak kaydı değiştirme işlemini uygulayalım:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="k">package</span> <span class="n">io</span><span class="p">.</span><span class="n">github</span><span class="p">.</span><span class="n">ilkgunel</span><span class="p">.</span><span class="n">mongodb</span><span class="p">;</span>

 <span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">mongodb</span><span class="p">.</span><span class="n">MongoClient</span><span class="p">;</span>
<span class="n">import</span> <span class="n">com</span><span class="p">.</span><span class="n">mongodb</span><span class="p">.</span><span class="n">client</span><span class="p">.</span><span class="n">MongoDatabase</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">DateFormat</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">text</span><span class="p">.</span><span class="n">SimpleDateFormat</span><span class="p">;</span>
<span class="n">import</span> <span class="n">static</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Arrays</span><span class="p">.</span><span class="n">asList</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Date</span><span class="p">;</span>
<span class="n">import</span> <span class="n">java</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">Locale</span><span class="p">;</span>
<span class="n">import</span> <span class="n">org</span><span class="p">.</span><span class="n">bson</span><span class="p">.</span><span class="n">Document</span><span class="p">;</span>

<span class="k">public</span> <span class="n">class</span> <span class="n">MongoDBUpdateRecords</span> <span class="p">{</span>

<span class="k">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="k">String</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">MongoClient</span> <span class="n">mongoClient</span> <span class="p">=</span> <span class="n">null</span><span class="p">;</span>
    <span class="n">DateFormat</span> <span class="n">format</span> <span class="p">=</span> <span class="n">new</span> <span class="n">SimpleDateFormat</span><span class="p">(</span><span class="s2">"dd-MM-yyyy"</span><span class="p">,</span> <span class="n">Locale</span><span class="p">.</span><span class="n">ENGLISH</span><span class="p">);</span>
    <span class="n">try</span> <span class="p">{</span>
        <span class="n">mongoClient</span> <span class="p">=</span> <span class="n">new</span> <span class="n">MongoClient</span><span class="p">(</span><span class="s2">"localhost"</span><span class="p">,</span> <span class="m">27017</span><span class="p">);</span>
        <span class="n">MongoDatabase</span> <span class="n">database</span> <span class="p">=</span> <span class="n">mongoClient</span><span class="p">.</span><span class="n">getDatabase</span><span class="p">(</span><span class="s2">"MongoDB"</span><span class="p">);</span>
        <span class="n">database</span><span class="p">.</span><span class="n">getCollection</span><span class="p">(</span><span class="s2">"Records"</span><span class="p">).</span><span class="n">replaceOne</span><span class="p">(</span><span class="n">new</span> <span class="n">Document</span><span class="p">(</span><span class="s2">"cuisine"</span><span class="p">,</span> <span class="s2">"Turkish"</span><span class="p">),</span>
                <span class="n">new</span> <span class="n">Document</span><span class="p">(</span><span class="s2">"address"</span><span class="p">,</span>
                        <span class="n">new</span> <span class="n">Document</span><span class="p">()</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"street"</span><span class="p">,</span> <span class="s2">"Samsun Sinop Yolu"</span><span class="p">)</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"zipcode"</span><span class="p">,</span> <span class="s2">"5255"</span><span class="p">)</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"building"</span><span class="p">,</span> <span class="s2">"5255"</span><span class="p">)</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"coord"</span><span class="p">,</span> <span class="n">asList</span><span class="p">(-</span><span class="m">73.9557413</span><span class="p">,</span> <span class="m">40.7720266</span><span class="p">)))</span>
                <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"borough"</span><span class="p">,</span> <span class="s2">"Ünye"</span><span class="p">)</span>
                <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"cuisine"</span><span class="p">,</span> <span class="s2">"Turkish"</span><span class="p">)</span>
                <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"grades"</span><span class="p">,</span> <span class="n">asList</span><span class="p">(</span>
                        <span class="n">new</span> <span class="n">Document</span><span class="p">()</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"date"</span><span class="p">,</span> <span class="n">format</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">new</span> <span class="n">Date</span><span class="p">()))</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"grade"</span><span class="p">,</span> <span class="s2">"A"</span><span class="p">)</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"score"</span><span class="p">,</span> <span class="m">11</span><span class="p">),</span>
                        <span class="n">new</span> <span class="n">Document</span><span class="p">()</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"date"</span><span class="p">,</span> <span class="n">format</span><span class="p">.</span><span class="n">format</span><span class="p">(</span><span class="n">new</span> <span class="n">Date</span><span class="p">()))</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"grade"</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">)</span>
                        <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"score"</span><span class="p">,</span> <span class="m">17</span><span class="p">)))</span>
                <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"Cabbar Usta"</span><span class="p">)</span>
                <span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"restaurant_id"</span><span class="p">,</span> <span class="s2">"41704620"</span><span class="p">));</span>

    <span class="p">}</span> <span class="n">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">System</span><span class="p">.</span><span class="n">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s2">"An Error Occured! Error is:"</span> <span class="p">+</span> <span class="n">e</span><span class="p">);</span>
    <span class="p">}</span> <span class="n">finally</span> <span class="p">{</span>
        <span class="n">mongoClient</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
 <span class="p">}</span>
</code></pre></div></div>

<p>Kodun çalıştırılması neticesinde kayıt şu hale geliyor:</p>

<p><a href="/images/mongoUpdate3.png">
<img src="/images/mongoUpdate3.png" style="width: 958px; height= 400px;" /></a></p>

<p>ReplaceOne metodunda bir püf nokta bulunuyor arkadaşlar. Bu metot güncellemeden ziyade değiştirme işlemi uyguladığından ilgili şarta uyan kayıt silinerek yerine gönderilen döküman girilir.
Bu nedenle replaceOne metodu ile güncelleme yapmamaya çalışmamak önemlidir çünkü mevcut verileriniz silinebilir ve kaydı tamamen bozabilirsiniz. Şimdi bu durumu da örnekleyelim. Yukarıdaki kodu şu şekilde değiştirelim:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> public static void main(String[] args) {
    MongoClient mongoClient = null;
    DateFormat format = new SimpleDateFormat("dd-MM-yyyy", Locale.ENGLISH);
    try {
        mongoClient = new MongoClient("localhost", 27017);
        MongoDatabase database = mongoClient.getDatabase("MongoDB");
        
        database.getCollection("Records").replaceOne(new Document("cuisine", "Turkish"),
                new Document("address",
                        new Document()
                        .append("street", "Samsun Sinop Yolu")
                        .append("zipcode", "5255")
                        .append("building", "5255")
                        .append("coord", asList(-73.9557413, 40.7720266)))
                .append("borough", "Ünye")
                .append("cuisine", "Turkish")
                .append("name", "Cabbar Usta")
                .append("restaurant_id", "41704620"));

    } catch (Exception e) {
        System.out.println("An Error Occured! Error is:" + e);
    } finally {
        mongoClient.close();
    }
}
</code></pre></div></div>

<p>Önceki koddaki <strong><em>grades</em></strong> alanını ve altında tuttuğu alanları çıkardık. Şimdi kodumuzu çalıştıralım ve kaydın durumuna bakalım:</p>

<p><a href="/images/mongoUpdate3.png">
<img src="/images/mongoUpdate3.png" style="width: 958px; height= 400px;" /></a></p>

<p>Ekran çıktısında gördüğümüz gibi grades alanı mevcut kayıt içinden kabyboldu çünkü eski kayıt silinerek koddaki yeni kayıt girildi.</p>

<p>Bu yazıda da bu kadar arkadaşlar. Gelecek yazıda görüşene kadar sağlıcakla kalın.</p>

<p style="text-align: center">Selam ve Sevgilerimle</p>


    </div>

    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
<script>

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//ilkaygunel-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                                    
  </div>
</aside>

  </div>

</article>

      </div>

      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="https://www.instagram.com/ilkay_gunel/" target="_blank"><img src="/images/instagram.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="https://www.facebook.com/ilkay.gunel" target="_blank"><img src="/images/facebook.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="https://www.youtube.com/c/ilkaygunel" target="_blank"><img src="/images/youtube.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://twitter.com/ilkaygunel" target="_blank"><img src="/images/twitter.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://github.com/ilkgunel" target="_blank"><img src="/images/github.jpg" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://linkedin.com/in/ilkaygunel" target="_blank"><img src="/images/linkedin.png" style="width: 24px;height: 24px;"></img></a></li>
  
</ul>
    <p class="txt-medium-gray">
      <small>&copy;2017 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <a href="http://github.com/ilkgunel/ilkgunel.github.io" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#337ab7; color:#fff; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
      <script>
      $(document).ready(function() {
        $('.sliding-panel-button,.sliding-panel-fade-screen,.sliding-panel-close').on('click touchstart',function (e) {
          $('.sliding-panel-content,.sliding-panel-fade-screen').toggleClass('is-visible');
          e.preventDefault();
        });
      });
      </script>
    </main>
  </body>
</html>
