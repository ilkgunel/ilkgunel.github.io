<!DOCTYPE html>
<html>
    <head>
  <script type="text/javascript">
        function setVoice() {
            var vid = document.getElementById("voice");
            if(vid!=null){
            	vid.volume = 0.2;
            }
        }
        window.onload = setVoice;
        </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
		google_ad_client: "ca-pub-0980023289791742",
		enable_page_level_ads: true
	  });
	</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory</title>
    <meta name="description" content="Merhabalar arkadaşlar.">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://ilkaygunel.com/blog/2017/securing-rest-service-spring-security-spring-boot-inmemory/">
    <link rel="alternate" type="application/rss+xml" title="İlkay Günel - Blog" href="http://ilkaygunel.com/feed.xml" />
      <!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory | İlkay Günel - Blog</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory" />
<meta name="author" content="İlkay Günel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory" />
<meta property="og:description" content="Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory" />
<link rel="canonical" href="http://ilkaygunel.com/blog/2017/securing-rest-service-spring-security-spring-boot-inmemory/" />
<meta property="og:url" content="http://ilkaygunel.com/blog/2017/securing-rest-service-spring-security-spring-boot-inmemory/" />
<meta property="og:site_name" content="İlkay Günel - Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-12-23T20:40:21+03:00" />
<script type="application/ld+json">
{"description":"Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory","author":{"@type":"Person","name":"İlkay Günel"},"@type":"BlogPosting","url":"http://ilkaygunel.com/blog/2017/securing-rest-service-spring-security-spring-boot-inmemory/","headline":"Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory","dateModified":"2017-12-23T20:40:21+03:00","datePublished":"2017-12-23T20:40:21+03:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://ilkaygunel.com/blog/2017/securing-rest-service-spring-security-spring-boot-inmemory/"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76541903-2', 'auto');
  ga('send', 'pageview');
</script>

    <main>
      <header class="site-header">
  <div class="container">
    <h1><a href="/">Ana Sayfa</a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/ilkay-gunel-cv.pdf" title="Bana Ait CV">Bana Ait CV</a></li>
        
          <li><a href="/blog/2016/git-nedir" title="Git Nedir? Nasıl Kullanılır?">Git Nedir? Nasıl Kullanılır?</a></li>
        
          <li><a href="/blog/2017/angular-2-tutorials" title="Angular 2">Angular 2</a></li>
        
          <li><a href="/blog/2016/maven-tutorials" title="Maven">Maven</a></li>
        
          <li><a href="/blog/2016/jsf-tutorials-list" title="JSF">JSF</a></li>
        
          <li><a href="/blog/2016/spring-tutorials" title="Spring 4">Spring 4</a></li>
        
          <li><a href="/blog/2016/eclipselink" title="Eclipselink">Eclipselink</a></li>
        
          <li><a href="/blog/2016/resteasy/" title="Resteasy">Resteasy</a></li>
        
          <li><a href="/blog/2016/mongodb/" title="MongoDB&Java">MongoDB&Java</a></li>
        
          <li><a href="/blog/2016/test" title="Test">Test</a></li>
        
          <li><a href="/blog/2016/useful-libraries-for-java" title="Java İçin Faydalı Kütüphaneler">Java İçin Faydalı Kütüphaneler</a></li>
        
          <li><a href="/about" title="Hakkımda">Hakkımda</a></li>
        
          <li><a href="/blog/2016/eclipse-notes" title="Eclipse">Eclipse</a></li>
        
          <li><a href="/blog/2016/formula1/" title="Formula 1">Formula 1</a></li>
        
          <li><a href="/blog/2016/kitaplar" title="Kitaplar">Kitaplar</a></li>
        
          <li><a href="/blog/2017/filmler/" title="Filmler">Filmler</a></li>
        
          <li><a href="/blog" title="Blog">Blog</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
        <li><a href="https://1000kitap.com/ilkaygunel">1000Kitap</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Spring Boot ve Spring Security İle Rest Servisi Koruma 1 - InMemory</h1>
      <p class="post-meta">Dec 23, 2017</p>
    </header>

    <div class="post-content">
      <p>Merhabalar arkadaşlar.</p>

<p>Bu yazıda Spring Rest ile oluşturulmuş basit bir web servisin Spring Boot tabanlı bir maven projesinde Spring Security ile koruma altına alınmasını temel olarak anlatacağım. Bu yazıda başlıkta da belirttiğim üzere inmemory user kullanarak doğrulama ve yetkilendirme işine bakacağız. Bir sonraki yazıda
ise veritabanında tanımlı user ile bu işlemi örnekleyeceğiz.</p>

<p>Bu yazıdaki uygulamanın kodlarına <a href="https://github.com/ilkgunel/SpringSecurityWithSpringBoot/tree/master">https://github.com/ilkgunel/SpringSecurityWithSpringBoot/tree/master</a> adresinden erişebilirsiniz.</p>

<p><strong>pom.xml</strong></p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span></span><span class="nt">&lt;project</span> <span class="na">xmlns=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="na">xmlns:xsi=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span>
	<span class="na">xsi:schemaLocation=</span><span class="s">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span><span class="nt">&gt;</span>
	<span class="nt">&lt;modelVersion&gt;</span>4.0.0<span class="nt">&lt;/modelVersion&gt;</span>
	<span class="nt">&lt;groupId&gt;</span>com.ilkaygunel<span class="nt">&lt;/groupId&gt;</span>
	<span class="nt">&lt;artifactId&gt;</span>SpringSecurityWithSpringBoot<span class="nt">&lt;/artifactId&gt;</span>
	<span class="nt">&lt;version&gt;</span>0.0.1-SNAPSHOT<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;packaging&gt;</span>war<span class="nt">&lt;/packaging&gt;</span>
	<span class="nt">&lt;name&gt;</span>SpringSecurityWithSpringBoot<span class="nt">&lt;/name&gt;</span>
	<span class="nt">&lt;description&gt;</span>Example usage project for Spring Security with Spring Boot<span class="nt">&lt;/description&gt;</span>

	<span class="nt">&lt;parent&gt;</span>
		<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
		<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-parent<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;version&gt;</span>1.5.9.RELEASE<span class="nt">&lt;/version&gt;</span>
	<span class="nt">&lt;/parent&gt;</span>

	<span class="nt">&lt;dependencies&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
		<span class="nt">&lt;dependency&gt;</span>
			<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
			<span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-security<span class="nt">&lt;/artifactId&gt;</span>
		<span class="nt">&lt;/dependency&gt;</span>
	<span class="nt">&lt;/dependencies&gt;</span>

	<span class="nt">&lt;properties&gt;</span>
		<span class="nt">&lt;java.version&gt;</span>9<span class="nt">&lt;/java.version&gt;</span>
	<span class="nt">&lt;/properties&gt;</span>

	<span class="nt">&lt;build&gt;</span>
		<span class="nt">&lt;plugins&gt;</span>
			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="nt">&lt;/artifactId&gt;</span>
			<span class="nt">&lt;/plugin&gt;</span>
		<span class="nt">&lt;/plugins&gt;</span>
	<span class="nt">&lt;/build&gt;</span>

	<span class="nt">&lt;repositories&gt;</span>
		<span class="nt">&lt;repository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-releases<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/libs-release<span class="nt">&lt;/url&gt;</span>
		<span class="nt">&lt;/repository&gt;</span>
	<span class="nt">&lt;/repositories&gt;</span>
	<span class="nt">&lt;pluginRepositories&gt;</span>
		<span class="nt">&lt;pluginRepository&gt;</span>
			<span class="nt">&lt;id&gt;</span>spring-releases<span class="nt">&lt;/id&gt;</span>
			<span class="nt">&lt;url&gt;</span>https://repo.spring.io/libs-release<span class="nt">&lt;/url&gt;</span>
		<span class="nt">&lt;/pluginRepository&gt;</span>
	<span class="nt">&lt;/pluginRepositories&gt;</span>
<span class="nt">&lt;/project&gt;</span></code></pre></figure>

<p>pom.xml dosyamız içerisinde <strong><em>parent</em></strong> tag’inin altında Spring Boot kütüphanelerinin yer aldığı projeyi tanıtmış olduk. Projemize bağımlılık olarak Spring’in web ve security kütüphanelerini ekledik.</p>

<p><strong>application.properties</strong></p>

<figure class="highlight"><pre><code class="language-properties" data-lang="properties"><span></span><span class="na">server.contextPath</span><span class="o">=</span><span class="s">/SpringSecurityWithSpringBoot</span>
<span class="na">server.port</span><span class="o">=</span><span class="s">8080</span></code></pre></figure>

<p>application.properties dosyamız içinde projenin deploy edileceği context path ayarını ve çalışacağı portu belirliyoruz.</p>

<p><strong>Address.java</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">package</span> <span class="nn">com.ilkaygunel.pojo</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Address</span> <span class="o">{</span>
	
	<span class="kd">public</span> <span class="nf">Address</span><span class="o">(){</span>
		
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="nf">Address</span><span class="o">(</span><span class="n">String</span> <span class="n">neighborhood</span><span class="o">,</span><span class="n">String</span> <span class="n">borough</span><span class="o">,</span><span class="n">String</span> <span class="n">country</span><span class="o">){</span>
		<span class="k">this</span><span class="o">.</span><span class="na">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">borough</span> <span class="o">=</span> <span class="n">borough</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">country</span> <span class="o">=</span> <span class="n">country</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">private</span> <span class="n">String</span> <span class="n">neighborhood</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">borough</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">country</span><span class="o">;</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getNeighborhood</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">neighborhood</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setNeighborhood</span><span class="o">(</span><span class="n">String</span> <span class="n">neighborhood</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">neighborhood</span> <span class="o">=</span> <span class="n">neighborhood</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getBorough</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">borough</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBorough</span><span class="o">(</span><span class="n">String</span> <span class="n">borough</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">borough</span> <span class="o">=</span> <span class="n">borough</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getCountry</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">country</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCountry</span><span class="o">(</span><span class="n">String</span> <span class="n">country</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">country</span> <span class="o">=</span> <span class="n">country</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<p>Address sınıfımız içerisinde bir üyenin adresine ait bazı bilgileri tutacak alanlar ve onların get-set metotları yer alıyor. Sınıf içerisinde hiç parametre almayan ve tüm değerleri parametre alan iki constructor bulunuyor.</p>

<p><strong>Member.java</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">package</span> <span class="nn">com.ilkaygunel.pojo</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Member</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="nf">Member</span><span class="o">()</span> <span class="o">{</span>

	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">Member</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">,</span> <span class="n">String</span> <span class="n">surname</span><span class="o">,</span> <span class="n">String</span> <span class="n">city</span><span class="o">,</span> <span class="n">String</span> <span class="n">company</span><span class="o">,</span><span class="n">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">surname</span> <span class="o">=</span> <span class="n">surname</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">company</span> <span class="o">=</span> <span class="n">company</span><span class="o">;</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">private</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">surname</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">city</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">String</span> <span class="n">company</span><span class="o">;</span>
	<span class="kd">private</span> <span class="n">Address</span> <span class="n">address</span><span class="o">;</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setName</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getSurname</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">surname</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSurname</span><span class="o">(</span><span class="n">String</span> <span class="n">surname</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">surname</span> <span class="o">=</span> <span class="n">surname</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getCity</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">city</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCity</span><span class="o">(</span><span class="n">String</span> <span class="n">city</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">city</span> <span class="o">=</span> <span class="n">city</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="n">String</span> <span class="nf">getCompany</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">company</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setCompany</span><span class="o">(</span><span class="n">String</span> <span class="n">company</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">company</span> <span class="o">=</span> <span class="n">company</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="n">Address</span> <span class="nf">getAddress</span><span class="o">()</span> <span class="o">{</span>
		<span class="k">return</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>
	
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setAddress</span><span class="o">(</span><span class="n">Address</span> <span class="n">address</span><span class="o">)</span> <span class="o">{</span>
		<span class="k">this</span><span class="o">.</span><span class="na">address</span> <span class="o">=</span> <span class="n">address</span><span class="o">;</span>
	<span class="o">}</span>

<span class="o">}</span></code></pre></figure>

<p>Member sınıfı içerisinde üyeye ait bilgileri tutan name, surname, city, company ve address alanları ve onların get-set metotları yer alıyor. Address sınıfı ile aynı şekilde burada da iki yapılandırıcı mevcut.</p>

<p><strong>MemberListWebService.java</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">package</span> <span class="nn">com.ilkaygunel.webservice</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMapping</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestMethod</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RequestParam</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.web.bind.annotation.RestController</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">com.ilkaygunel.pojo.Address</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ilkaygunel.pojo.Member</span><span class="o">;</span>

<span class="nd">@RestController</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemberListWebService</span> <span class="o">{</span>
	<span class="nd">@RequestMapping</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;/memberList&quot;</span><span class="o">,</span> <span class="n">method</span> <span class="o">=</span> <span class="n">RequestMethod</span><span class="o">.</span><span class="na">GET</span><span class="o">)</span>
	<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="nf">getExample</span><span class="o">(</span><span class="nd">@RequestParam</span><span class="o">(</span><span class="n">value</span> <span class="o">=</span> <span class="s">&quot;MemberId&quot;</span><span class="o">,</span> <span class="n">defaultValue</span> <span class="o">=</span> <span class="s">&quot;0&quot;</span><span class="o">)</span> <span class="n">String</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">List</span><span class="o">&lt;</span><span class="n">Member</span><span class="o">&gt;</span> <span class="n">memberList</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
		<span class="n">Member</span> <span class="n">member1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&quot;İsmail&quot;</span><span class="o">,</span> <span class="s">&quot;Ceylan&quot;</span><span class="o">,</span> <span class="s">&quot;İstanbul&quot;</span><span class="o">,</span> <span class="s">&quot;Saha&quot;</span><span class="o">,</span>
				<span class="k">new</span> <span class="n">Address</span><span class="o">(</span><span class="s">&quot;Haramidere&quot;</span><span class="o">,</span> <span class="s">&quot;Beylikdüzü&quot;</span><span class="o">,</span> <span class="s">&quot;TÜRKİYE&quot;</span><span class="o">));</span>
		<span class="n">memberList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">member1</span><span class="o">);</span>

		<span class="n">Member</span> <span class="n">member2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&quot;Serkan&quot;</span><span class="o">,</span> <span class="s">&quot;Akbaba&quot;</span><span class="o">,</span> <span class="s">&quot;İstanbul&quot;</span><span class="o">,</span> <span class="s">&quot;Saha&quot;</span><span class="o">,</span>
				<span class="k">new</span> <span class="n">Address</span><span class="o">(</span><span class="s">&quot;Cennet Mahallesi&quot;</span><span class="o">,</span> <span class="s">&quot;K.Çekmece&quot;</span><span class="o">,</span> <span class="s">&quot;TÜRKİYE&quot;</span><span class="o">));</span>
		<span class="n">memberList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">member2</span><span class="o">);</span>

		<span class="n">Member</span> <span class="n">member3</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Member</span><span class="o">(</span><span class="s">&quot;Ertan&quot;</span><span class="o">,</span> <span class="s">&quot;Şahin&quot;</span><span class="o">,</span> <span class="s">&quot;İstanbul&quot;</span><span class="o">,</span> <span class="s">&quot;Saha&quot;</span><span class="o">,</span>
				<span class="k">new</span> <span class="n">Address</span><span class="o">(</span><span class="s">&quot;Maslak&quot;</span><span class="o">,</span> <span class="s">&quot;Sarıyer&quot;</span><span class="o">,</span> <span class="s">&quot;TÜRKİYE&quot;</span><span class="o">));</span>
		<span class="n">memberList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">member3</span><span class="o">);</span>

		<span class="k">if</span> <span class="o">(</span><span class="n">id</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="s">&quot;0&quot;</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">memberList</span><span class="o">;</span>
		<span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
			<span class="k">return</span> <span class="n">memberList</span><span class="o">.</span><span class="na">subList</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">id</span><span class="o">)</span> <span class="o">-</span> <span class="mi">1</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">id</span><span class="o">));</span>
		<span class="o">}</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>MemberListWebService sınıfı bizim get isteklerimize yanıt verecek olan ve bize üye listesini JSON formatında sunacak bir web servis sınıfıdır. Sınıf içerisinde 3 adet member nesnesi oluşturuyoruz ve ve bunları memberList listesine koyuyoruz. Akabinde eğer gelen istek içerisinde id bilgisi yok ise ya da 
0 gelmiş ise tüm listeyi aksi takdirde gelen id bilgisindeki user’ı döndürüyoruz.</p>

<p>Daha önce <a href="http://ilkaygunel.com/blog/2016/spring-rest-get-example/">Spring Rest GET Örneği</a> yazımda Spring ile GET hizmeti sunan bir Testful web servis yazmayı anlatmıştım. İlgilenen arkadaşlar oraya da göz atabilirler.</p>

<p><strong>WebSecurityConfig.java</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">package</span> <span class="nn">com.ilkaygunel.security</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.builders.HttpSecurity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.configuration.EnableWebSecurity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebSecurityConfig</span> <span class="kd">extends</span> <span class="n">WebSecurityConfigurerAdapter</span> <span class="o">{</span>

	<span class="nd">@Override</span>
	<span class="kd">protected</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">HttpSecurity</span> <span class="n">http</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">http</span><span class="o">.</span><span class="na">csrf</span><span class="o">().</span><span class="na">disable</span><span class="o">().</span><span class="na">authorizeRequests</span><span class="o">().</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
				<span class="o">.</span><span class="na">antMatchers</span><span class="o">(</span><span class="s">&quot;/memberList&quot;</span><span class="o">).</span><span class="na">hasAnyRole</span><span class="o">(</span><span class="s">&quot;ADMIN&quot;</span><span class="o">).</span><span class="na">anyRequest</span><span class="o">().</span><span class="na">authenticated</span><span class="o">()</span>
				<span class="o">.</span><span class="na">and</span><span class="o">().</span><span class="na">httpBasic</span><span class="o">();</span>
	<span class="o">}</span>

<!--
	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">AuthenticationManagerBuilder</span> <span class="n">auth</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
		<span class="n">auth</span><span class="o">.</span><span class="na">inMemoryAuthentication</span><span class="o">().</span><span class="na">withUser</span><span class="o">(</span><span class="s">&quot;adminUser&quot;</span><span class="o">).</span><span class="na">password</span><span class="o">(</span><span class="s">&quot;adminUserPassword&quot;</span><span class="o">).</span><span class="na">roles</span><span class="o">(</span><span class="s">&quot;ADMIN&quot;</span><span class="o">)</span>
		     <span class="o">.</span><span class="na">and</span><span class="o">().</span><span class="na">withUser</span><span class="o">(</span><span class="s">&quot;standartUser&quot;</span><span class="o">).</span><span class="na">password</span><span class="o">(</span><span class="s">&quot;standartUserPassword&quot;</span><span class="o">).</span><span class="na">roles</span><span class="o">(</span><span class="s">&quot;USER&quot;</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>
-->

	<span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">(</span><span class="n">AuthenticationManagerBuilder</span> <span class="n">auth</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
        <span class="n">InMemoryUserDetailsManager</span> <span class="n">manager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">InMemoryUserDetailsManager</span><span class="o">();</span>
        <span class="n">manager</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="n">User</span><span class="o">.</span><span class="na">withUsername</span><span class="o">(</span><span class="s">"user"</span><span class="o">).</span><span class="na">password</span><span class="o">(</span><span class="s">"{noop}password"</span><span class="o">).</span><span class="na">roles</span><span class="o">(</span><span class="s">"ADMIN"</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>
        <span class="n">manager</span><span class="o">.</span><span class="na">createUser</span><span class="o">(</span><span class="n">User</span><span class="o">.</span><span class="na">withUsername</span><span class="o">(</span><span class="s">"admin"</span><span class="o">).</span><span class="na">password</span><span class="o">(</span><span class="s">"{noop}admin"</span><span class="o">).</span><span class="na">roles</span><span class="o">(</span><span class="s">"USER"</span><span class="o">).</span><span class="na">build</span><span class="o">());</span>
        <span class="n">auth</span><span class="o">.</span><span class="na">userDetailsService</span><span class="o">(</span><span class="n">manager</span><span class="o">);</span>
    <span class="o">}</span></code></pre></figure>

<p>Yazımızın ana noktasını oluşturan olayı konuştuğumuz WebSecurityConfig sınıfına geldi sıra. WebSecurityConfig sınıfını  @Configuration ve @EnableWebSecurity notasyonları ile işaretliyoruz. @Configuration notasyonu XML ile de yapılabilen konfigürasyon ayarlarının Java kodunda yapılabilmesini sağlayan notasyondur.
@EnableWebSecurity notasyonu da web projemiz üzerinde güvenlik katmanını aktif hale getiren notasyondur.</p>

<p>WebSecurityConfig sınıfımızı WebSecurityConfigurerAdapter sınıfımızdan kalıtıyoruz ve içerisinde <strong><em>configure(HttpSecurity http)</em></strong> ve <strong><em>configure(AuthenticationManagerBuilder auth)</em></strong> metotlarını Override ediyoruz. <strong><em>configure(HttpSecurity http)</em></strong> metodu ile hangi URL path’inin herkese açık olacağını
hangisinin hangi yetki sahibi kişilerin erişimine açık olacağını kararlaştırıyoruz. Biz burada / path’i yani kök path için herkesin erişimine açık olsun, memberList path’ine sadece ADMIN yetkisi olan kişiler erişebilsin ve httpBasic ile Basic Authentication kullanılsın dedik.</p>

<p><strong><em>configure(AuthenticationManagerBuilder auth)</em></strong> metodu ile de user tanımlarımızı yapıyoruz. inMemoryAuthentication() ifadesi user’ların runtime’da tutulduğu ve bir yerlerden çekilip alınmadığı manasına gelir. withUser() metodu ile userName’i, password() metodu ile user’ın parolasını, roles() metodu ile 
de user’ın rolünü tanımlıyoruz. Biz biri ADMIN biri de USER olacak şekilde iki user tanımladık.</p>

<p><strong>Application.java</strong></p>

<figure class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">package</span> <span class="nn">com.ilkaygunel.main</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.ComponentScan</span><span class="o">;</span>

<span class="nd">@SpringBootApplication</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;com.ilkaygunel.security&quot;</span> <span class="o">})</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;com.ilkaygunel.pojo&quot;</span> <span class="o">})</span>
<span class="nd">@ComponentScan</span><span class="o">(</span><span class="n">basePackages</span> <span class="o">=</span> <span class="o">{</span> <span class="s">&quot;com.ilkaygunel.webservice&quot;</span> <span class="o">})</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="n">Application</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>
<span class="o">}</span></code></pre></figure>

<p>Application sınıfımız Spring Boot projemizi çok kolay bir şekilde ayağa kaldırmamızı sağlayan sınıfımızıdır. Application sınıfına sağ tıklayıp Run As -&gt; Java Application dediğimiz zaman projemiz ayağa kalkacaktır.</p>

<p>Projemiz ayağa kalktıktan sonra ben Postman uygulmamı açıyorum ve <a href="http://localhost:8080/SpringSecurityWithSpringBoot/memberList">http://localhost:8080/SpringSecurityWithSpringBoot/memberList</a> adresine hiçbir username password vermeden bir GET isteği yolluyorum.</p>

<p><a href="/images/springBootSecurityRest/1.png">
<img src="/images/springBootSecurityRest/1.png" style="width: 958px; height= 400px;" />
</a></p>

<p>No Auth bir şekilde yollamış olduğum bu GET isteği ekran görüntüsünde de göreceğiniz gibi <strong><em>Unauthorized</em></strong> ve  <strong><em>Full authentication is required to access this resource</em></strong> mesajları ile reddedildi. Şimdi USER rolüne sahip standartUser ve onun standartUserPassowrd parolası ile bir istek gönderiyorum.</p>

<p><a href="/images/springBootSecurityRest/2.png">
<img src="/images/springBootSecurityRest/2.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Bu kez de <strong><em>Access Denied</em></strong> mesajı ile gönderdiğim istek reddedildi çünkü memberList path’ine sadece ADMIN yetkisi olan user ulaşabilir. Şimdi ADMIN yetkisi olan user’ın bilgileri ile GET isteğini gönderiyorum.</p>

<p><a href="/images/springBootSecurityRest/3.png">
<img src="/images/springBootSecurityRest/3.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Gördüğünüz gibi web servis ilgili yetkiye sakip kişi bilgisi ile istek gelince bana data dönüşünü yaptı.</p>

<p>Bu yazıda anlatacaklarım bu kadar arkadaşlar. Bir sonraki yazıda yetkilendirme işlemi için database kullanımını anlatacağım.</p>

<p>Görüşene kadar sağlıcakla kalın.</p>

<p style="text-align: center">Selam ve Sevgilerimle</p>

    </div>

    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
<script>

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//ilkaygunel-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                                    
  </div>
</aside>

  </div>

</article>

      </div>

      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="https://www.instagram.com/ilkay_gunel/" target="_blank"><img src="/images/instagram.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="https://www.facebook.com/ilkay.gunel" target="_blank"><img src="/images/facebook.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="https://www.youtube.com/c/ilkaygunel" target="_blank"><img src="/images/youtube.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://twitter.com/ilkaygunel" target="_blank"><img src="/images/twitter.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://github.com/ilkgunel" target="_blank"><img src="/images/github.jpg" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://linkedin.com/in/ilkaygunel" target="_blank"><img src="/images/linkedin.png" style="width: 24px;height: 24px;"></img></a></li>
  
</ul>
    <p class="txt-medium-gray">
      <small>&copy;2018 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <a href="http://github.com/ilkgunel/ilkgunel.github.io" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#337ab7; color:#fff; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
      <script>
      $(document).ready(function() {
        $('.sliding-panel-button,.sliding-panel-fade-screen,.sliding-panel-close').on('click touchstart',function (e) {
          $('.sliding-panel-content,.sliding-panel-fade-screen').toggleClass('is-visible');
          e.preventDefault();
        });
      });
      </script>
    </main>
  </body>
</html>
