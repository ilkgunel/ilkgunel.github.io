<!DOCTYPE html>
<html>
    <head>
  <script type="text/javascript">
        function setVoice() {
            var vid = document.getElementById("voice");
            if(vid!=null){
            	vid.volume = 0.2;
            }
        }
        window.onload = setVoice;
        </script>
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<script>
	  (adsbygoogle = window.adsbygoogle || []).push({
		google_ad_client: "ca-pub-0980023289791742",
		enable_page_level_ads: true
	  });
	</script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Docker Compose İle Spring Boot ve Elasticseaarch'ün Dockerize Edilmesi</title>
    <meta name="description" content="Merhaba.">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://ilkaygunel.com/blog/2020/dockerizing-spring-boot-app/">
    <link rel="alternate" type="application/rss+xml" title="İlkay Günel - Blog" href="http://ilkaygunel.com/feed.xml" />
      <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Docker Compose İle Spring Boot ve Elasticseaarch’ün Dockerize Edilmesi | İlkay Günel - Blog</title>
<meta name="generator" content="Jekyll v3.8.7" />
<meta property="og:title" content="Docker Compose İle Spring Boot ve Elasticseaarch’ün Dockerize Edilmesi" />
<meta name="author" content="İlkay Günel" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Docker Compose İle Spring Boot ve Elasticseaarch’ün Dockerize Edilmesi" />
<meta property="og:description" content="Docker Compose İle Spring Boot ve Elasticseaarch’ün Dockerize Edilmesi" />
<link rel="canonical" href="http://ilkaygunel.com/blog/2020/dockerizing-spring-boot-app/" />
<meta property="og:url" content="http://ilkaygunel.com/blog/2020/dockerizing-spring-boot-app/" />
<meta property="og:site_name" content="İlkay Günel - Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-08-02T18:38:20+03:00" />
<script type="application/ld+json">
{"mainEntityOfPage":{"@type":"WebPage","@id":"http://ilkaygunel.com/blog/2020/dockerizing-spring-boot-app/"},"@type":"BlogPosting","author":{"@type":"Person","name":"İlkay Günel"},"url":"http://ilkaygunel.com/blog/2020/dockerizing-spring-boot-app/","headline":"Docker Compose İle Spring Boot ve Elasticseaarch’ün Dockerize Edilmesi","dateModified":"2020-08-02T18:38:20+03:00","datePublished":"2020-08-02T18:38:20+03:00","description":"Docker Compose İle Spring Boot ve Elasticseaarch’ün Dockerize Edilmesi","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-76541903-2', 'auto');
  ga('send', 'pageview');
</script>

    <main>
      <header class="site-header">
  <div class="container">
    <h1><a href="/">Ana Sayfa</a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/ilkay-gunel-cv.pdf" title="Bana Ait CV">Bana Ait CV</a></li>
        
          <li><a href="/blog/2016/git-nedir" title="Git Nedir? Nasıl Kullanılır?">Git Nedir? Nasıl Kullanılır?</a></li>
        
          <li><a href="/blog/2017/angular-2-tutorials" title="Angular 2">Angular 2</a></li>
        
          <li><a href="/blog/2016/maven-tutorials" title="Maven">Maven</a></li>
        
          <li><a href="/blog/2016/jsf-tutorials-list" title="JSF">JSF</a></li>
        
          <li><a href="/blog/2016/spring-tutorials" title="Spring 4">Spring 4</a></li>
        
          <li><a href="/blog/2016/eclipselink" title="Eclipselink">Eclipselink</a></li>
        
          <li><a href="/blog/2016/resteasy/" title="Resteasy">Resteasy</a></li>
        
          <li><a href="/blog/2016/mongodb/" title="MongoDB&Java">MongoDB&Java</a></li>
        
          <li><a href="/blog/2016/test" title="Test">Test</a></li>
        
          <li><a href="/blog/2016/useful-libraries-for-java" title="Java İçin Faydalı Kütüphaneler">Java İçin Faydalı Kütüphaneler</a></li>
        
          <li><a href="/about" title="Hakkımda">Hakkımda</a></li>
        
          <li><a href="/blog/2016/eclipse-notes" title="Eclipse">Eclipse</a></li>
        
          <li><a href="/blog/2016/formula1/" title="Formula 1">Formula 1</a></li>
        
          <li><a href="/blog/2016/kitaplar" title="Kitaplar">Kitaplar</a></li>
        
          <li><a href="/blog" title="Blog">Blog</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
        <li><a href="https://1000kitap.com/ilkaygunel">1000Kitap</a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Docker Compose İle Spring Boot ve Elasticseaarch'ün Dockerize Edilmesi</h1>
      <p class="post-meta">Aug 2, 2020</p>
    </header>

    <div class="post-content">
      <p>Merhaba.</p>

<p>Bu yazıda sizlere Docker Compose kullanarak Elasticsearch ve Spring Boot’un Dockerize edilip kullanılması hakkında bilgi vereceğim.</p>

<p>Öncelikle bilgisayarınızda Docker’ın kurulu olması gerekmektedir. Windows kullanan arkadaşlar https://docs.docker.com/docker-for-windows/install/ adresindeki maddeleri takip ederek Docker’ı bilgisayarlarına kurabilirler. Esasen kurulum için spesifik olarak yapılması gereken bir şey yok. Next Next deyip kurulumu tamamlayabilirsiniz.</p>

<p>Bu yazı için geçenlerde Elasticsearch’ün Spring Data ile beraber kullanımına dair kullandığım örnek uygulamayı kullacağım.</p>

<p><strong>Docker Compose File Oluşturulması</strong></p>

<p>Docker Compose bizim uygulamamızın ihtiyaç duyduğu servisleri tek bir komutla ayağa kaldırmamızı sağlayan bir araçtır arkadaşlar. Ayağa kaldırma sırasında uygulanacak prosedürleri .yaml formatındaki bir dosyada saklarız.</p>

<p>Biz de şimdi projenin kök dizini içerisinde <strong><em>docker-compose.yml</em></strong> adında bir dosya oluşturuyoruz.</p>

<p><strong>docker-compose.yml Dosyasının İçeriği</strong></p>

<p>docker-compose.yml dosyamız az önce de bahsettiğim gibi uygulamamızın ihtiyaç duyduğu servislerin, bağımlılıkların nasıl ayağa kaldırabileceğini söylediğimiz dosyadır. Konfigürasyon işlemimiz bu dosya içerisinde yer alacaktır.</p>

<p>docker-compose.yml dosyamızın içeriği de şu şekildedir:</p>

<figure class="highlight"><pre><code class="language-yml" data-lang="yml"><span class="na">version</span><span class="pi">:</span> <span class="s1">'</span><span class="s">3'</span>

<span class="na">services</span><span class="pi">:</span>
  <span class="na">web</span><span class="pi">:</span>
    <span class="na">build</span><span class="pi">:</span> <span class="s">.</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">8080:8080"</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">docker-files_default</span>
  <span class="na">elasticsearch</span><span class="pi">:</span>
    <span class="na">image</span><span class="pi">:</span> <span class="s">docker.elastic.co/elasticsearch/elasticsearch:7.8.1</span>
    <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
    <span class="na">container_name</span><span class="pi">:</span> <span class="s">elasticsearch</span>
    <span class="na">environment</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">discovery.type=single-node</span>
      <span class="pi">-</span> <span class="s">cluster.name=docker-cluster</span>
      <span class="pi">-</span> <span class="s">bootstrap.memory_lock=true</span>
      <span class="pi">-</span> <span class="s">node.name=nodefortutorial</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">ES_JAVA_OPTS=-Xms512m</span><span class="nv"> </span><span class="s">-Xmx512m"</span>
    <span class="na">ulimits</span><span class="pi">:</span>
      <span class="na">memlock</span><span class="pi">:</span>
        <span class="na">soft</span><span class="pi">:</span> <span class="s">-1</span>
        <span class="na">hard</span><span class="pi">:</span> <span class="s">-1</span>
    <span class="na">ports</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">9200:9200"</span>
      <span class="pi">-</span> <span class="s2">"</span><span class="s">9300:9300"</span>
    <span class="na">networks</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">docker-files_default</span>
<span class="na">networks</span><span class="pi">:</span>
  <span class="na">docker-files_default</span><span class="pi">:</span>
    <span class="na">external</span><span class="pi">:</span> <span class="no">true</span>

<span class="na">volumes</span><span class="pi">:</span>
  <span class="na">esdata</span><span class="pi">:</span>
    <span class="na">driver</span><span class="pi">:</span> <span class="s">local</span></code></pre></figure>

<p>docker-compose.yml dosyası içeriğinde <strong><em>services</em></strong> seçeneği altında <strong><em>web</em></strong> ve <strong><em>elasticsearch</em></strong> adında 2 alt tag’imiz var.</p>

<p>web dediğimiz kısım bizim Spring Boot uygulamamızı simgeliyor. Uygulamamız 8080 portunda çalışacak ve <strong><em>docker-files_default</em></strong> adındaki bir network’e dahil olacak.</p>

<p>elasticsearch tag’i altında da <strong><em>image</em></strong> özelliği ile Docker Hub’dan çekilcek elasticsearch imajını belitriyoruz. <strong><em>container_name</em></strong> özelliği ile Docker container isimlendirmesini yapıyoruz. <strong><em>environment</em></strong> özelliği ile elasticsearch’ün çalışma şeklini konfigüre ediyoruz. <strong><em>discovery.type=single-node</em></strong> elastichsearch’ün tek node üzerinde çalışacağını söylüyoruz, <strong><em>cluster.name</em></strong> node’u kapsayan cluster’ı isimlendiriyoruz. <strong><em>bootstrap.memory_lock</em></strong> özelliğine true ataması yaparak elasticsearch ayağa kalkarken RAM’den bir alanı kendisine ayıracağını belirtiyoruz. <strong><em>node.name=nodefortutorial</em></strong> özelliği ile de ayağa kalkacak tek node’un isimlendirmesini yapıyoruz. Ayrıca network üzerinden elastichsearch’e de bu node ismi ile erişeceğiz. ports özelliği ile elasticsearch’ün çalışacağı portları ayarlıyoruz. 9200 ve 9300 portları elasticseach’e tahsis edilecek.networks kısmında da web kısmında olduğu gibi elasticsearch’ü <strong><em>docker-files_default</em></strong> adındaki network’e dahil ediyoruz.</p>

<p><strong>Network’ün Oluşturulması</strong></p>

<p>.yml uzantılı dosyamızı hazırladıktan sonra sıra geldi network’ümüzü oluşturmaya. Oldukça basit bir komutu komut satırı üzerinde işleterek network’ü oluşturacağız. Çalıştıracağımız komut şu şekildedir:</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">docker network create docker-files_default</code></pre></figure>

<p>Bu komutu çalıştırdıktan sonra komut satırı üzerinden <strong><em>docker network ls</em></strong> komutunu çalıştırarak network’ün oluşturulup oluşturulmadığını görebiliriz.</p>

<p><a href="/images/docker/2.png">
    <img src="/images/docker/2.png" style="width: 958px; height= 400px;" />
</a></p>

<p><strong>Uygulamanın Ayağa Kaldırılması</strong></p>

<p>Komut satırı üzerinden projenin kök dizinine gelip aşağıdaki komutu çalıştırdığımız takdirde Spring Boot uygulamamız ve elastichsearch Dockerize eidlmiş bir şekilde ayağa kaldırılacaklar.</p>

<figure class="highlight"><pre><code class="language-text" data-lang="text">docker-compose up -d</code></pre></figure>

<p>Komutun çalışması tamamlandığında yine komut satırı üzerinden <strong><em>docker ps -a</em></strong> komutunu çalıştırarak Docker’a kayıtlı imajları listeyelebiliriz.</p>

<p><a href="/images/docker/3.png">
    <img src="/images/docker/3.png" style="width: 958px; height= 400px;" />
</a></p>

<p><a href="/images/docker/4.png">
    <img src="/images/docker/4.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Ekran görüntüsündne görebileceğimiz gibi Spring Boot uygulamamız ve Elastissearch Docker üzerinde koşmaya başlamışlar.</p>

<p><strong>Uygulamayı Test Edelim</strong></p>

<p>Şimdi Postman üzerinden http://localhost:8080/api/drivers/ adresine aşağıdaki body’e sahip HTTP POST isteğini gönderiyorum.</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="s2">"Alex"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"surname"</span><span class="p">:</span><span class="s2">"Albon"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"team"</span><span class="p">:</span><span class="s2">"Aston Martin Red Bull Racing"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p><strong><em>Kayıt İşlemi Başarılı</em></strong> şeklindeki mesaja sahip şekilde bir response geliyor.</p>

<p><a href="/images/docker/5.png">
    <img src="/images/docker/5.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Şimdi aynı adrese HTTP GET isteği gönderiyorum.</p>

<p><a href="/images/docker/6.png">
    <img src="/images/docker/6.png" style="width: 958px; height= 400px;" />
</a></p>

<p>Az önce kaydettiğim kullanıcının bana gösterildiğini görüyorum. Uygulamamız başarılı şekilde çalışıyor.</p>

<p>Bu yazıda anlatacaklarım bu kadar arkadaşlar. Başka bir yazıda görüşene kadar hoşçakalın.</p>

    </div>

    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
<script>

/**
 *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
 *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
/*
var disqus_config = function () {
    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = '//ilkaygunel-com.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                                    
  </div>
</aside>

  </div>

</article>

      </div>

      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="https://www.instagram.com/ilkay_gunel/" target="_blank"><img src="/images/instagram.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="https://www.facebook.com/ilkay.gunel" target="_blank"><img src="/images/facebook.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="https://www.youtube.com/c/ilkaygunel" target="_blank"><img src="/images/youtube.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://twitter.com/ilkaygunel" target="_blank"><img src="/images/twitter.png" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://github.com/ilkgunel" target="_blank"><img src="/images/github.jpg" style="width: 24px;height: 24px;"></img></a></li>
  <li><a href="http://linkedin.com/in/ilkaygunel" target="_blank"><img src="/images/linkedin.png" style="width: 24px;height: 24px;"></img></a></li>
  
</ul>
    <p class="txt-medium-gray">
      <small>&copy;2020 All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <a href="http://github.com/ilkgunel/ilkgunel.github.io" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#337ab7; color:#fff; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
      <script>
      $(document).ready(function() {
        $('.sliding-panel-button,.sliding-panel-fade-screen,.sliding-panel-close').on('click touchstart',function (e) {
          $('.sliding-panel-content,.sliding-panel-fade-screen').toggleClass('is-visible');
          e.preventDefault();
        });
      });
      </script>
    </main>
  </body>
</html>
